{% load static %}
<!doctype html>
<html lang="ru">
<head>
    {% include 'layouts/meta.html' %}
    {% load django_bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <script type="text/javascript" src="{% static 'js/jquery-3.7.1.min.js' %}"></script>
    {#    {% bootstrap_javascript jquery='full' %}#}
    <link href="{% static 'css/custom.css' %}" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.ico' %}">
    <title>{% block title %}Электронный журнал{% endblock %}</title>
</head>
<body>
{#{% if user.is_authenticated %}#}
{#    {% include 'layouts/navbar.html' %}#}
{#{% endif %}#}

<div class="container-fluid" id="app">
    {% bootstrap_messages %}
    {% if user.is_authenticated and user.role != 'EMPTY' %}
        <!-- Боковая панель для авторизованных пользователей -->
        <div class="sidebar d-none d-lg-block" style="width: 220px;">
            <div class="sidebar-sticky">
                {% include 'includes/sidebar.html' %}
            </div>
        </div>
        <!-- Основной контент -->
        <main class="main-content">
            {% block content %}{% endblock %}
        </main>
    {% else %}
        <!-- Контент для неавторизованных или пользователей без роли -->
        <div class="container mt-5 pt-5">
            {% block auth_content %}{% endblock %}
        </div>
    {% endif %}
</div>

{% include 'layouts/footer.html' %}

<script>
    // Автоматическое скрытие toast через 5 секунд
    document.addEventListener('DOMContentLoaded', function () {
        var toastElList = [].slice.call(document.querySelectorAll('.toast'));
        var toastList = toastElList.map(function (toastEl) {
            return new bootstrap.Toast(toastEl, {delay: 5000});
        });
        toastList.forEach(toast => toast.show());
    });
</script>

{% block extra_js %}{% endblock %}
{#<script src="{% static 'js/any.js' %}"></script>#}
</body>
</html>