{% extends "admin/change_list.html" %}
{% load i18n admin_urls %}

{% block content %}
<div class="module">
    <h2>Статистика оценок</h2>
    
    <div class="results">
        <table>
            <thead>
                <tr>
                    <th>Всего оценок</th>
                    <th>Средний балл</th>
                    <th>5</th>
                    <th>4</th>
                    <th>3</th>
                    <th>2</th>
                    <th>1</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ grade_stats.total|default:0 }}</td>
                    <td>{{ grade_stats.avg|floatformat:2|default:"0.00" }}</td>
                    <td>{{ grade_stats.five|default:0 }}</td>
                    <td>{{ grade_stats.four|default:0 }}</td>
                    <td>{{ grade_stats.three|default:0 }}</td>
                    <td>{{ grade_stats.two|default:0 }}</td>
                    <td>{{ grade_stats.one|default:0 }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="module">
    <h2>Статистика по типам оценок</h2>
    
    <div class="results">
        <table>
            <thead>
                <tr>
                    <th>Тип оценки</th>
                    <th>Количество</th>
                    <th>Средний балл</th>
                    <th>Вес</th>
                </tr>
            </thead>
            <tbody>
                {% for type in type_stats %}
                <tr>
                    <td>{{ type.title }}</td>
                    <td>{{ type.count|default:0 }}</td>
                    <td>
                        {% with avg=type.avg_grade %}
                            {{ avg|floatformat:2|default:"-" }}
                        {% endwith %}
                    </td>
                    <td>{{ type.weight }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">Нет данных</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{{ block.super }}
{% endblock %}